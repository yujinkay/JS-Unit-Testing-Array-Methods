<script src="../tinytest.js"></script>
<script>

function lastIndexOf(array, element, index) {
    let startingIndex = index,
        searchElement = element; 
    const length = array.length; 
    // Determine the startingIndex
    if (!startingIndex || startingIndex >= length) startingIndex = length -1; 
    // If the abs value of startingIndex is greater than the array length, return -1
    else if (Math.abs(startingIndex) > length) return -1; 
    // If startingIndex is less than 0, initialize to its value + length of array 
    else if (startingIndex < 0) startingIndex = startingIndex + length;
    // Iterate through the array from the last index
        for (let i = startingIndex; i > -1; i--) {
          // If the item strictly equals the search element, return the index
          if (array[i] === searchElement) return i;   
      }
      // Otherwise, return -1
      return -1; 
}

tests({
  'It should return the last index of the element in array.': function() {
      const lastIndexOfResult = lastIndexOf([1, 1, 1], 1); 
      eq(lastIndexOfResult, 2); 
  },
  'It should return -1 if the last index of element is not found.': function() {
      const lastIndexOfResult = lastIndexOf([1, 1, 1], 2); 
      eq(lastIndexOfResult, -1); 
  },
  'It should search from array.length - 1 if no startingIndex.': function() {
      const lastIndexOfResult = lastIndexOf([1, 1, 1], 1); 
      eq(lastIndexOfResult, 2); 
  },
  'It should search from array.length - 1 if the startingIndex is greater or equal to array.length.': function() {
      const lastIndexOfResult1 = lastIndexOf([1, 1, 1], 1, 5); 
      const lastIndexOfResult2 = lastIndexOf([1, 1, 1], 1, 3);  
      eq(lastIndexOfResult1, 2); 
      eq(lastIndexOfResult2, 2); 
  },
  'It should return - 1 if the absolute value of startingIndex is greater than array.length.': function() {
      const lastIndexOfResult = lastIndexOf([1, 1, 1], 1, -5); 
      eq(lastIndexOfResult, -1); 
  },
  'It should start from array.length + startingIndex if the startingIndex is negative.': function() {
      const lastIndexOfResult = lastIndexOf([1, 1, 1], 1, -1); 
      eq(lastIndexOfResult, 2); 
  }, 

  'It should return -1 if search element is not found in array.': function() {
      const lastIndexOfResult = lastIndexOf([1, 1, 1], 2); 
      eq(lastIndexOfResult, -1); 
  }
});
</script>
